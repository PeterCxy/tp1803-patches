From 95e0507bd127728ec5fa39a9774b5bd87b77c207 Mon Sep 17 00:00:00 2001
From: Kuba Wojciechowski <nullbytepl@gmail.com>
Date: Sun, 13 Sep 2020 02:07:10 +0300
Subject: [PATCH] configs: msmnile: import nubia's mixer_paths_tavil

TODO: cleanup

Signed-off-by: Kuba Wojciechowski <nullbytepl@gmail.com>
Change-Id: If5b395ac7de5685d1564c3c3482f55917202e758
---
 configs/msmnile/mixer_paths_tavil.xml | 203 ++++++++++++++++++++++----
 1 file changed, 177 insertions(+), 26 deletions(-)

diff --git a/configs/msmnile/mixer_paths_tavil.xml b/configs/msmnile/mixer_paths_tavil.xml
index 002b4a42..40d8cd32 100644
--- a/configs/msmnile/mixer_paths_tavil.xml
+++ b/configs/msmnile/mixer_paths_tavil.xml
@@ -139,6 +139,14 @@
     <ctl name="SLIMBUS_5_RX Audio Mixer MultiMedia16" value="0" />
     <ctl name="SLIMBUS_2_RX Audio Mixer MultiMedia16" value="0" />
     <ctl name="SLIMBUS_6_RX Audio Mixer MultiMedia16" value="0" />
+
+	<ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia1" value="0" />
+	<ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia4" value="0" />
+	<ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia5" value="0" />
+	<ctl name="QUAT_MI2S_RX_Voice Mixer VoiceMMode1" value="0" />
+	<ctl name="QUAT_MI2S_RX_Voice Mixer VoiceMMode2" value="0" />
+	<ctl name="QUAT_MI2S_RX_Voice Mixer Voip" value="0" />
+
     <ctl name="USB_AUDIO_RX Audio Mixer MultiMedia1" value="0" />
     <ctl name="USB_AUDIO_RX Audio Mixer MultiMedia2" value="0" />
     <ctl name="USB_AUDIO_RX Audio Mixer MultiMedia3" value="0" />
@@ -330,6 +338,8 @@
     <ctl name="EAR PA Gain" value="G_6_DB" />
     <ctl name="EAR SPKR PA Gain" value="G_DEFAULT" />
 
+    <ctl name="RX1 Mix Digital Volume" value="84" />
+    <ctl name="RX2 Mix Digital Volume" value="84" />
     <ctl name="RX0 Digital Volume" value="84" />
     <ctl name="RX1 Digital Volume" value="84" />
     <ctl name="RX2 Digital Volume" value="84" />
@@ -340,7 +350,7 @@
     <ctl name="RX7 Digital Volume" value="84" />
     <ctl name="ADC1 Volume" value="12" />
     <ctl name="ADC2 Volume" value="12" />
-    <ctl name="ADC3 Volume" value="0" />
+    <ctl name="ADC3 Volume" value="12" />
     <ctl name="ADC4 Volume" value="0" />
     <ctl name="DEC0 Volume" value="102" />
     <ctl name="DEC1 Volume" value="102" />
@@ -355,6 +365,8 @@
     <!-- Compander controls -->
     <ctl name="COMP1 Switch" value="1" />
     <ctl name="COMP2 Switch" value="1" />
+    <ctl name="COMP3 Switch" value="0" />
+    <ctl name="COMP4 Switch" value="0" />
     <ctl name="COMP7 Switch" value="0" />
     <ctl name="COMP8 Switch" value="0" />
 
@@ -570,6 +582,21 @@
         <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia1" value="1" />
     </path>
 
+    <path name="deep-buffer-playback speaker">
+		<!-- <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia1" value="1" /> -->
+		<ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia1" value="1" />
+    </path>
+
+    <path name="deep-buffer-playback speaker-test">
+		<!-- <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia1" value="1" /> -->
+		<ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia1" value="1" />
+    </path>
+
+    <path name="deep-buffer-playback voice-speaker">
+		<!-- <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia1" value="1" /> -->
+		<ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia1" value="1" />
+    </path>
+
     <path name="deep-buffer-playback speaker-protected">
         <path name="deep-buffer-playback" />
     </path>
@@ -613,6 +640,10 @@
         <ctl name="SLIMBUS_6_RX Audio Mixer MultiMedia1" value="1" />
     </path>
 
+    <path name="deep-buffer-playback headphones-test">
+        <path name="deep-buffer-playback headphones" />
+    </path>
+
     <path name="deep-buffer-playback speaker-and-headphones">
         <path name="deep-buffer-playback headphones" />
         <path name="deep-buffer-playback" />
@@ -632,6 +663,21 @@
         <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia5" value="1" />
     </path>
 
+    <path name="low-latency-playback speaker">
+		<!-- <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia5" value="1" /> -->
+		<ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia5" value="1" />
+    </path>
+
+    <path name="low-latency-playback speaker-test">
+		<!-- <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia5" value="1" /> -->
+		<ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia5" value="1" />
+    </path>
+
+    <path name="low-latency-playback voice-speaker">
+		<ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia5" value="1" />
+		<!-- <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia5" value="1" /> -->
+    </path>
+
     <path name="low-latency-playback speaker-protected">
         <path name="low-latency-playback" />
     </path>
@@ -675,6 +721,10 @@
         <ctl name="SLIMBUS_6_RX Audio Mixer MultiMedia5" value="1" />
     </path>
 
+    <path name="low-latency-playback headphones-test">
+        <path name="low-latency-playback headphones" />
+    </path>
+
     <path name="low-latency-playback speaker-and-headphones">
         <path name="low-latency-playback headphones" />
         <path name="low-latency-playback" />
@@ -698,6 +748,10 @@
         <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia8" value="1" />
     </path>
 
+    <path name="audio-ull-playback speaker">
+        <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia8" value="1" />
+    </path>
+
     <path name="audio-ull-playback speaker-protected">
         <path name="audio-ull-playback" />
     </path>
@@ -763,6 +817,14 @@
         <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia4" value="1" />
     </path>
 
+    <path name="compress-offload-playback speaker">
+        <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia4" value="1" />
+    </path>
+
+    <path name="compress-offload-playback voice-speaker">
+        <ctl name="QUAT_MI2S_RX Audio Mixer MultiMedia4" value="1" />
+    </path>
+
     <path name="compress-offload-playback speaker-protected">
         <path name="compress-offload-playback" />
     </path>
@@ -1578,6 +1640,13 @@
         <ctl name="Voip_Tx Mixer SLIM_0_TX_Voip" value="1" />
     </path>
 
+    <path name="compress-voip-call voice-speaker">
+        <!-- <ctl name="QUAT_MI2S_RX_Voice Mixer Voip" value="1" /> -->
+        <!-- <ctl name="Voip_Tx Mixer SLIM_0_TX_Voip" value="1" /> -->
+        <ctl name="SLIM_0_RX_Voice Mixer Voip" value="1" />
+        <ctl name="Voip_Tx Mixer SLIM_0_TX_Voip" value="1" />
+    </path>
+
     <path name="compress-voip-call bt-a2dp">
         <ctl name="SLIM_7_RX_Voice Mixer Voip" value="1" />
         <ctl name="Voip_Tx Mixer SLIM_0_TX_Voip" value="1" />
@@ -1619,6 +1688,13 @@
         <ctl name="VoiceMMode1_Tx Mixer SLIM_0_TX_MMode1" value="1" />
     </path>
 
+    <path name="voicemmode1-call voice-speaker">
+        <ctl name="SLIM_0_RX_Voice Mixer VoiceMMode1" value="1" />
+        <ctl name="VoiceMMode1_Tx Mixer SLIM_0_TX_MMode1" value="1" />
+        <!-- <ctl name="QUAT_MI2S_RX_Voice Mixer VoiceMMode1" value="1" /> -->
+        <!-- <ctl name="VoiceMMode1_Tx Mixer SLIM_0_TX_MMode1" value="1" /> -->
+    </path>
+
     <path name="voicemmode1-call headphones">
         <ctl name="SLIM_6_RX_Voice Mixer VoiceMMode1" value="1" />
         <ctl name="VoiceMMode1_Tx Mixer SLIM_0_TX_MMode1" value="1" />
@@ -1664,6 +1740,13 @@
         <ctl name="VoiceMMode2_Tx Mixer SLIM_0_TX_MMode2" value="1" />
     </path>
 
+    <path name="voicemmode2-call voice-speaker">
+        <ctl name="SLIM_0_RX_Voice Mixer VoiceMMode2" value="1" />
+        <ctl name="VoiceMMode2_Tx Mixer SLIM_0_TX_MMode2" value="1" />
+        <!-- <ctl name="QUAT_MI2S_RX_Voice Mixer VoiceMMode2" value="1" /> -->
+        <!-- <ctl name="VoiceMMode2_Tx Mixer SLIM_0_TX_MMode2" value="1" /> -->
+    </path>
+
     <path name="voicemmode2-call headphones">
         <ctl name="SLIM_6_RX_Voice Mixer VoiceMMode2" value="1" />
         <ctl name="VoiceMMode2_Tx Mixer SLIM_0_TX_MMode2" value="1" />
@@ -1709,6 +1792,10 @@
         <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia10" value="1" />
     </path>
 
+    <path name="audio-playback-voip speaker">
+        <ctl name="SLIMBUS_0_RX Audio Mixer MultiMedia10" value="1" />
+    </path>
+
     <path name="audio-playback-voip headphones">
         <ctl name="SLIMBUS_6_RX Audio Mixer MultiMedia10" value="1" />
     </path>
@@ -1790,6 +1877,14 @@
         <ctl name="IIR0 INP0 MUX" value="DEC0" />
     </path>
 
+    <path name="amic3">
+        <ctl name="AIF1_CAP Mixer SLIM TX6" value="1"/>
+        <ctl name="SLIM_0_TX Channels" value="One" />
+        <ctl name="CDC_IF TX6 MUX" value="DEC6" />
+        <ctl name="ADC MUX6" value="AMIC" />
+        <ctl name="AMIC MUX6" value="ADC3" />
+        <ctl name="IIR0 INP0 MUX" value="DEC6" />
+    </path>
     <!-- For Tavil, DMIC numbered from 0 to 5 -->
     <path name="dmic1">
         <ctl name="AIF1_CAP Mixer SLIM TX7" value="1" />
@@ -1846,27 +1941,40 @@
     </path>
 
     <path name="speaker">
-        <ctl name="SLIM RX0 MUX" value="AIF1_PB" />
-        <ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
-        <ctl name="SLIM RX1 MUX" value="AIF1_PB" />
-        <ctl name="CDC_IF RX1 MUX" value="SLIM RX1" />
-        <ctl name="SLIM_0_RX Channels" value="Two" />
-        <ctl name="RX INT7_1 MIX1 INP0" value="RX0" />
-        <ctl name="RX INT8_1 MIX1 INP0" value="RX1" />
-        <ctl name="COMP7 Switch" value="1" />
-        <ctl name="COMP8 Switch" value="1" />
-        <ctl name="SpkrLeft COMP Switch" value="1" />
-        <ctl name="SpkrLeft BOOST Switch" value="1" />
-        <ctl name="SpkrLeft VISENSE Switch" value="1" />
-        <ctl name="SpkrLeft SWR DAC_Port Switch" value="1" />
-        <ctl name="SpkrRight COMP Switch" value="1" />
-        <ctl name="SpkrRight BOOST Switch" value="1" />
-        <ctl name="SpkrRight VISENSE Switch" value="1" />
-        <ctl name="SpkrRight SWR DAC_Port Switch" value="1" />
+		<ctl name="SLIM RX0 MUX" value="AIF1_PB" />
+		<ctl name="SLIM RX1 MUX" value="AIF1_PB" />
+		<ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
+		<ctl name="CDC_IF RX1 MUX" value="SLIM RX1" />
+		<ctl name="SLIM_0_RX Channels" value="Two" />
+		<ctl name="RX INT3_1 MIX1 INP0" value="RX0" />
+		<ctl name="RX INT4_1 MIX1 INP0" value="RX1" />
+		<ctl name="COMP3 Switch" value="1" />
+		<ctl name="COMP4 Switch" value="1" />
+    </path>
+
+    <path name="speaker-test">
+		<ctl name="SLIM RX0 MUX" value="AIF1_PB" />
+		<ctl name="SLIM RX1 MUX" value="AIF1_PB" />
+		<ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
+		<ctl name="CDC_IF RX1 MUX" value="SLIM RX1" />
+		<ctl name="SLIM_0_RX Channels" value="Two" />
+		<ctl name="RX INT3_1 MIX1 INP0" value="RX0" />
+		<ctl name="RX INT4_1 MIX1 INP0" value="RX1" />
+		<ctl name="COMP3 Switch" value="1" />
+		<ctl name="COMP4 Switch" value="1" />
     </path>
 
     <path name="speaker-mono">
-        <ctl name="SLIM RX0 MUX" value="AIF1_PB" />
+		<ctl name="SLIM RX0 MUX" value="AIF1_PB" />
+		<ctl name="SLIM RX1 MUX" value="AIF1_PB" />
+		<ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
+		<ctl name="CDC_IF RX1 MUX" value="SLIM RX1" />
+		<ctl name="SLIM_0_RX Channels" value="Two" />
+		<ctl name="RX INT3_1 MIX1 INP0" value="RX0" />
+		<ctl name="RX INT4_1 MIX1 INP0" value="RX1" />
+		<ctl name="COMP3 Switch" value="1" />
+		<ctl name="COMP4 Switch" value="1" />
+        <!--<ctl name="SLIM RX0 MUX" value="AIF1_PB" />
         <ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
         <ctl name="SLIM_0_RX Channels" value="One" />
         <ctl name="RX INT7_1 MIX1 INP0" value="RX0" />
@@ -1874,7 +1982,8 @@
         <ctl name="SpkrLeft COMP Switch" value="1" />
         <ctl name="SpkrLeft BOOST Switch" value="1" />
         <ctl name="SpkrLeft VISENSE Switch" value="1" />
-        <ctl name="SpkrLeft SWR DAC_Port Switch" value="1" />
+        <ctl name="SpkrLeft SWR DAC_Port Switch" value="1" />-->
+	<!-- <ctl name="TFA_CHIP_SELECTOR" value="1" /> -->
     </path>
 
     <path name="speaker-mono-2">
@@ -1931,7 +2040,11 @@
     </path>
 
     <path name="speaker-mic">
-        <path name="dmic3" />
+        <path name="amic3" />
+    </path>
+
+    <path name="single-mic-sec">
+        <path name="amic3" />
     </path>
 
     <path name="speaker-mic-liquid">
@@ -2001,11 +2114,19 @@
         <ctl name="SLIM RX0 MUX" value="AIF1_PB" />
         <ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
         <ctl name="SLIM_0_RX Channels" value="One" />
-        <ctl name="RX INT7_1 MIX1 INP0" value="RX0" />
+        <ctl name="RX INT0_1 MIX1 INP0" value="RX0" />
         <ctl name="COMP7 Switch" value="1" />
-        <ctl name="SpkrLeft COMP Switch" value="1" />
-        <ctl name="SpkrLeft BOOST Switch" value="1" />
-        <ctl name="SpkrLeft SWR DAC_Port Switch" value="1" />
+        <ctl name="RX INT0 DEM MUX" value="CLSH_DSM_OUT" />
+        <ctl name="EAR SPKR PA Gain" value="G_6_DB" />
+    </path>
+
+    <path name="handset-test">
+        <ctl name="SLIM RX0 MUX" value="AIF1_PB" />
+        <ctl name="CDC_IF RX0 MUX" value="SLIM RX0" />
+        <ctl name="SLIM_0_RX Channels" value="One" />
+        <ctl name="RX INT0_1 MIX1 INP0" value="RX0" />
+        <ctl name="COMP7 Switch" value="1" />
+        <ctl name="RX INT0 DEM MUX" value="CLSH_DSM_OUT" />
         <ctl name="EAR SPKR PA Gain" value="G_6_DB" />
     </path>
 
@@ -2018,7 +2139,22 @@
     </path>
 
     <path name="handset-mic">
-        <path name="dmic3" />
+        <!--<path name="amic1" />-->
+        <ctl name="AIF1_CAP Mixer SLIM TX7" value="1"/>
+        <ctl name="SLIM_0_TX Channels" value="One" />
+        <ctl name="CDC_IF TX7 MUX" value="DEC7" />
+        <ctl name="ADC MUX7" value="AMIC" />
+        <ctl name="AMIC MUX7" value="ADC1" />
+        <ctl name="IIR0 INP0 MUX" value="DEC7" />
+    </path>
+
+    <path name="single-mic-main">
+        <ctl name="AIF1_CAP Mixer SLIM TX7" value="1"/>
+        <ctl name="SLIM_0_TX Channels" value="One" />
+        <ctl name="CDC_IF TX7 MUX" value="DEC7" />
+        <ctl name="ADC MUX7" value="AMIC" />
+        <ctl name="AMIC MUX7" value="ADC1" />
+        <ctl name="IIR0 INP0 MUX" value="DEC7" />
     </path>
 
     <path name="handset-mic-qrd">
@@ -2096,6 +2232,16 @@
         <ctl name="RX INT2_2 MUX" value="RX3" />
     </path>
 
+    <path name="headphones-test">
+        <ctl name="SLIM RX2 MUX" value="AIF4_PB" />
+        <ctl name="SLIM RX3 MUX" value="AIF4_PB" />
+        <ctl name="SLIM_6_RX Channels" value="Two" />
+        <ctl name="RX INT1_2 MUX" value="RX2" />
+        <ctl name="RX INT2_2 MUX" value="RX3" />
+        <ctl name="RX1 Mix Digital Volume" value="96" />
+        <ctl name="RX2 Mix Digital Volume" value="96" />
+    </path>
+
     <path name="headphones-44.1">
         <ctl name="SLIM RX4 MUX" value="AIF3_PB" />
         <ctl name="SLIM RX5 MUX" value="AIF3_PB" />
@@ -2149,6 +2295,11 @@
         <ctl name="DEC0 Volume" value="84" />
     </path>
 
+    <path name="headset-mic-test">
+        <path name="amic2" />
+        <ctl name="DEC0 Volume" value="84" />
+    </path>
+
     <path name="headset-mic-liquid">
         <path name="amic2" />
     </path>
-- 
2.17.1

